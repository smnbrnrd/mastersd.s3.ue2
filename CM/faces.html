<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Master SD - Web Dynamique côté Serveur</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="reveal/dist/reveal.css">
    <link rel="stylesheet" href="reveal/plugin/highlight/zenburn.css" />
    <link rel="stylesheet" href="../css/cm.css">
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <!--------------------------------------------->
            <!-- Cover slide -->
            <section class="title-slide">
                <div class="title">Web Dynamique côté Serveur</div>
                <div class="subtitle">Jakarta Faces</div>
                <div class="author">Simon BERNARD</div>
                <div class="mail"><a href="mailto:simon.bernard@univ-rouen.fr">simon.bernard@univ-rouen.fr</a></div>
                <div class="logo"><img src="../img/logo_urn_color.png"></div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Jakarta Faces</h1>
                <div class="row">
                    <div class="col-6">
                        <ul>
                            <li>Framework MVC pour la création d'UI web</li>
                            <li>Modèle: CDI beans and co</li>
                            <li>Vues: pages <code>XHTML</code>, appelées <code>Facelets</code></li>
                            <li class="mb-4">Contrôleur: servlet <code>FacesServlet</code></li>
                            <li>La servlet est fournie par le framework</li>
                            <li>Facelets remplace <code>JSP</code> depuis la version 9</li>

                        </ul>
                    </div>
                    <div class="col-6">
                        <img src="figures/chap5/jakartafaces.png" class="w-90 m-auto">
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Jakarta Faces</h1>
                <h2>Exemple: guessnumber-faces</h2>
                <ul>
                    <li>Backing Bean <code>UserNumberBean</code></li>
                    <pre><code class="language-java compact" data-trim data-line-numbers>
@Named
@SessionScoped
public class UserNumberBean implements Serializable {
    private static final long serialVersionUID = 5443351151396868724L;

    private Integer randomInt = null;       // the random number to guess
    private Integer userNumber = null;      // the number proposed by the user
    private int maximum = 10;           
    private int minimum = 0;            

    public UserNumberBean() {
        Random randomGR = new Random();
        randomInt = Integer.valueOf(randomGR.nextInt(maximum + 1));
        System.out.println("Sime's number: " + randomInt);
    }
    public String getResponse() {
        if ((userNumber == null) || (userNumber.compareTo(randomInt) != 0)) {
            return "Sorry, " + userNumber + " is incorrect.";
        } else {
            return "Yay! You got it!";
        }
    }
    // getters and setters required for reading/writing access in the view
    ...
}
                    </code></pre>
                </ul>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Jakarta Faces</h1>
                <h2>Exemple: guessnumber-faces</h2>
                <ul>
                    <li>Facelet <code>greeting.xhtml</code></li>
                    <pre><code class="language-html compact" data-trim data-line-numbers>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:h=&quot;jakarta.faces.html&quot; xmlns:f=&quot;jakarta.faces.core&quot;&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot;/&gt;
        &lt;title&gt;Guess Number Facelets Application&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;main class=&quot;container&quot;&gt;
            &lt;h:graphicImage value=&quot;#{resource[&#39;images:logo-couleur.png&#39;]}&quot; alt=&quot;Master SD logo&quot;/&gt;
            &lt;h:form&gt;
                &lt;h2&gt;
                    Hi, my name is Sime. I am thinking of a number from #{userNumberBean.minimum} to #{userNumberBean.maximum}. 
                    Can you guess it?
                &lt;/h2&gt;
                &lt;p&gt;
                    &lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
                        &lt;f:validateLongRange minimum=&quot;#{userNumberBean.minimum}&quot; maximum=&quot;#{userNumberBean.maximum}&quot;/&gt;
                    &lt;/h:inputText&gt;
                    &lt;h:commandButton id=&quot;submit&quot; value=&quot;Submit&quot; action=&quot;response&quot;/&gt;
                &lt;/p&gt;
                &lt;h:message showSummary=&quot;true&quot; showDetail=&quot;false&quot; style=&quot;color: #d20005&quot; id=&quot;errors1&quot; for=&quot;userNo&quot;/&gt;
            &lt;/h:form&gt;
        &lt;/main&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
                    </code></pre>
                </ul>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Jakarta Faces</h1>
                <h2>Exemple: guessnumber-faces</h2>
                <ul>
                    <li>Facelet <code>response.xhtml</code></li>
                    <pre><code class="language-html compact" data-trim data-line-numbers>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:h=&quot;jakarta.faces.html&quot;&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot;/&gt;
        &lt;title&gt;Guess Number Facelets Application&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;main class=&quot;container&quot;&gt;
            &lt;h:graphicImage value=&quot;#{resource[&#39;images:logo-couleur.png&#39;]}&quot; alt=&quot;Master SD logo&quot;/&gt;
            &lt;h:form&gt;
                &lt;h2&gt;
                    &lt;h:outputText id=&quot;result&quot; value=&quot;#{userNumberBean.response}&quot;/&gt;
                &lt;/h2&gt;
                &lt;h:commandButton id=&quot;back&quot; value=&quot;Back&quot; action=&quot;greeting&quot;/&gt;
            &lt;/h:form&gt;
        &lt;/main&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
                    </code></pre>
                </ul>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Jakarta Faces</h1>
                <h2>Exemple: guessnumber-faces</h2>
                <ul>
                    <li>Déclarer la servlet <code>FacesServlet</code> dans le descripteur de déploiement (<code>WEB-INF/web.xml</code>)</li>
                    <pre><code class="language-xml compact" data-trim data-line-numbers>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
          xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; 
          version=&quot;3.1&quot;&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;jakarta.faces.webapp.FacesServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    &lt;session-config&gt;
        &lt;session-timeout&gt;
            30
        &lt;/session-timeout&gt;
    &lt;/session-config&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;greeting.xhtml&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
&lt;/web-app&gt;
                    </code></pre>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Cycle de vie</h1>
                <h2>Différences avec JSP</h2>
                <ul>
                    <li>Une page JSP est traduite en une unique servlet, qui génère toute la page HTML renvoyée au client</li>
                    <li class="mb-4">La vue est entièrement reconstruite par la servlet à chaque requête</li>
                    <li>Une page Facelet est constitué de plusieurs composants UI, organisés en arbre</li>
                    <li>Chaque composant est un objet Java autonome, responsable de son rendu et de son état</li>
                    <li>Ses états sont sauvegardés entre les requêtes, via les objets Java</li>
                    <li>La construction de l'arbre et son rendu sont gérés par le moteur de rendu de Jakarta Faces</li>
                </ul>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Cycle de vie</h1>
                <div class="row">
                    <div class="col-5">
                        <img src="figures/chap5/jakartafaces_cycle.png" class="w-100">
                    </div>
                    <div class="col-7">
                        <ol>
                            <li class="mb-3">Première requête vers une page facelets</li>
                            <ul class="small mb-5">
                                <li>Création d'un arbre de composants vide (en Java)</li>
                                <li>Arbre peuplé avec les composants de la vue facelets</li>
                                <li>Rendu de la vue facelets pour création de la page HTML résultante</li>
                                <li>Envoi de la page HTML au navigateur</li>
                                <li>Sauvegarde de l'état de la vue pour requêtes suivantes</li>
                            </ul>
                            Note: Dans ce cas, on n'exécute que la première (<em>restore view</em>) et la dernière étape (<em>render response</em>) du cycle de vie
                        </ol>
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Cycle de vie</h1>
                <div class="row">
                    <div class="col-5">
                        <img src="figures/chap5/jakartafaces_cycle.png" class="w-100">
                    </div>
                    <div class="col-7">
                        <ol start="2">
                            <li class="mb-3">Requêtes suivantes</li>
                            <ul class="small mb-5">
                                <li>La vue est restaurée</li>
                                <li>Paramètres de requête ajoutés dans l'arbre de composants</li>
                                <li>Validation et conversion des données saisies</li>
                                <li>Si erreurs: étape de rendu de la vue</li>
                                <li>Si ok, données mises à jour dans le modèle</li>
                                <li>Exécution de l'action associée à la commande utilisateur</li>
                                <li>En fonction du retour de l'action, on détermine la vue à rendre</li>
                            </ul>
                            Note: chaque étape <em>Process events</em> est susceptible de rediriger vers une autre vue (<em>response complete</em>)
                        </ol>
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Facelets</h1>
                <div class="boxtitle">Facelets</div>
                <div class="boxcontent mb-4">
                    <p>Langage de déclaration utilisé pour construire des vues Jakarta Faces (interfaces utilisateurs) sous la forme d'une structure arborescente de composants Java. Ces composants sont des composants Java, manipulés dans une page Facelets avec des balises spécifiques.</p>
                </div>
                <ul>
                    <li>Une vue facelets est un fichier <code>.xhtml</code></li>
                    <li>Mélange de balises HTML et de balises spécifiques à Facelets</li>
                    <li>Les balises facelets pour ajouter des composants, définis en Java dans le framework</li>
                    <li>Support des expressions EL (Expression Language) pour accéder aux données du modèle</li>
                    <li>Ce fichier N'EST PAS le fichier retourné au client</li>
                    <li>Il est traité par le moteur de rendu pour générer le contenu HTML final</li>
                </ul>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Facelets</h1>
                <div class="row">
                    <div class="col-6">
                        <pre><code class="language-html compact" data-trim data-line-numbers="1,2,7,10,13,16,17,22,25,27" class="w-100">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; 
    xmlns:h=&quot;jakarta.faces.html&quot; 
    xmlns:f=&quot;jakarta.faces.core&quot;&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot;/&gt;
        &lt;title&gt;Guess Number Facelets Application&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;main class=&quot;container&quot;&gt;
            &lt;h:graphicImage value=&quot;#{resource[&#39;images:logo-couleur.png&#39;]}&quot; alt=&quot;Master SD logo&quot;/&gt;
            &lt;h:form&gt;
                &lt;h2&gt;
                    Hi, my name is Sime. I am thinking of a number from #{userNumberBean.minimum} to #{userNumberBean.maximum}. 
                    Can you guess it?
                &lt;/h2&gt;
                &lt;p&gt;
                    &lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
                        &lt;f:validateLongRange minimum=&quot;#{userNumberBean.minimum}&quot; maximum=&quot;#{userNumberBean.maximum}&quot;/&gt;
                    &lt;/h:inputText&gt;
                    &lt;h:commandButton id=&quot;submit&quot; value=&quot;Submit&quot; action=&quot;response&quot;/&gt;
                &lt;/p&gt;
                &lt;h:message showSummary=&quot;true&quot; showDetail=&quot;false&quot; style=&quot;color: #d20005&quot; id=&quot;errors1&quot; for=&quot;userNo&quot;/&gt;
            &lt;/h:form&gt;
        &lt;/main&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
                        </code></pre>
                    </div>
                    <div class="col-6">
                        <ul>
                            <li class="mb-2">Balises HTML5, reportées dans la page HTML résultante</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Facelets</h1>
                <div class="row">
                    <div class="col-6">
                        <pre><code class="language-html compact" data-trim data-line-numbers="2-4" class="w-100">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; 
    xmlns:h=&quot;jakarta.faces.html&quot; 
    xmlns:f=&quot;jakarta.faces.core&quot;&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot;/&gt;
        &lt;title&gt;Guess Number Facelets Application&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;main class=&quot;container&quot;&gt;
            &lt;h:graphicImage value=&quot;#{resource[&#39;images:logo-couleur.png&#39;]}&quot; alt=&quot;Master SD logo&quot;/&gt;
            &lt;h:form&gt;
                &lt;h2&gt;
                    Hi, my name is Sime. I am thinking of a number from #{userNumberBean.minimum} to #{userNumberBean.maximum}. 
                    Can you guess it?
                &lt;/h2&gt;
                &lt;p&gt;
                    &lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
                        &lt;f:validateLongRange minimum=&quot;#{userNumberBean.minimum}&quot; maximum=&quot;#{userNumberBean.maximum}&quot;/&gt;
                    &lt;/h:inputText&gt;
                    &lt;h:commandButton id=&quot;submit&quot; value=&quot;Submit&quot; action=&quot;response&quot;/&gt;
                &lt;/p&gt;
                &lt;h:message showSummary=&quot;true&quot; showDetail=&quot;false&quot; style=&quot;color: #d20005&quot; id=&quot;errors1&quot; for=&quot;userNo&quot;/&gt;
            &lt;/h:form&gt;
        &lt;/main&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
                        </code></pre>
                    </div>
                    <div class="col-6">
                        <ul>
                            <li class="mb-2">Balises HTML5, reportées dans la page HTML résultante</li>
                            <li class="mb-2">Accès aux bibliothèques de balises standard : balises HTML (<code>h:</code>) et fonctionnalités de bases (<code>f:</code>)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Facelets</h1>
                <div class="row">
                    <div class="col-6">
                        <pre><code class="language-html compact" data-trim data-line-numbers="5,6,8,9,11,26" class="w-100">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; 
    xmlns:h=&quot;jakarta.faces.html&quot; 
    xmlns:f=&quot;jakarta.faces.core&quot;&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot;/&gt;
        &lt;title&gt;Guess Number Facelets Application&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;main class=&quot;container&quot;&gt;
            &lt;h:graphicImage value=&quot;#{resource[&#39;images:logo-couleur.png&#39;]}&quot; alt=&quot;Master SD logo&quot;/&gt;
            &lt;h:form&gt;
                &lt;h2&gt;
                    Hi, my name is Sime. I am thinking of a number from #{userNumberBean.minimum} to #{userNumberBean.maximum}. 
                    Can you guess it?
                &lt;/h2&gt;
                &lt;p&gt;
                    &lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
                        &lt;f:validateLongRange minimum=&quot;#{userNumberBean.minimum}&quot; maximum=&quot;#{userNumberBean.maximum}&quot;/&gt;
                    &lt;/h:inputText&gt;
                    &lt;h:commandButton id=&quot;submit&quot; value=&quot;Submit&quot; action=&quot;response&quot;/&gt;
                &lt;/p&gt;
                &lt;h:message showSummary=&quot;true&quot; showDetail=&quot;false&quot; style=&quot;color: #d20005&quot; id=&quot;errors1&quot; for=&quot;userNo&quot;/&gt;
            &lt;/h:form&gt;
        &lt;/main&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
                        </code></pre>
                    </div>
                    <div class="col-6">
                        <ul>
                            <li class="mb-2">Balises HTML5, reportées dans la page HTML résultante</li>
                            <li class="mb-2">Accès aux bibliothèques de balises standard : balises HTML (<code>h:</code>) et fonctionnalités de bases (<code>f:</code>)</li>
                            <li class="mb-2"><code>&lt;h:head&gt;</code>, <code>&lt;h:body&gt;</code> nécessaires pour la gestion des ressources externes (CSS, script, images)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Facelets</h1>
                <div class="row">
                    <div class="col-6">
                        <pre><code class="language-html compact" data-trim data-line-numbers="12,18-21,23" class="w-100">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; 
    xmlns:h=&quot;jakarta.faces.html&quot; 
    xmlns:f=&quot;jakarta.faces.core&quot;&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot;/&gt;
        &lt;title&gt;Guess Number Facelets Application&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;main class=&quot;container&quot;&gt;
            &lt;h:graphicImage value=&quot;#{resource[&#39;images:logo-couleur.png&#39;]}&quot; alt=&quot;Master SD logo&quot;/&gt;
            &lt;h:form&gt;
                &lt;h2&gt;
                    Hi, my name is Sime. I am thinking of a number from #{userNumberBean.minimum} to #{userNumberBean.maximum}. 
                    Can you guess it?
                &lt;/h2&gt;
                &lt;p&gt;
                    &lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
                        &lt;f:validateLongRange minimum=&quot;#{userNumberBean.minimum}&quot; maximum=&quot;#{userNumberBean.maximum}&quot;/&gt;
                    &lt;/h:inputText&gt;
                    &lt;h:commandButton id=&quot;submit&quot; value=&quot;Submit&quot; action=&quot;response&quot;/&gt;
                &lt;/p&gt;
                &lt;h:message showSummary=&quot;true&quot; showDetail=&quot;false&quot; style=&quot;color: #d20005&quot; id=&quot;errors1&quot; for=&quot;userNo&quot;/&gt;
            &lt;/h:form&gt;
        &lt;/main&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
                        </code></pre>
                    </div>
                    <div class="col-6">
                        <ul>
                            <li class="mb-2">Balises HTML5, reportées dans la page HTML résultante</li>
                            <li class="mb-2">Accès aux bibliothèques de balises standard : balises HTML (<code>h:</code>) et fonctionnalités de bases (<code>f:</code>)</li>
                            <li class="mb-2"><code>&lt;h:head&gt;</code>, <code>&lt;h:body&gt;</code> nécessaires pour la gestion des ressources externes (CSS, script, images)</li>
                            <li class="mb-2"><code>&lt;h:form&gt;</code>, <code>&lt;h:inputText&gt;</code>, <code>&lt;h:commandButton&gt;</code> pour la gestion des formulaires</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Librairies de balises</h1>
                <table class="table mt-4 small">
                    <thead>
                        <tr>
                            <th>URI</th>
                            <th>Préfixe</th>
                            <th>Description</th>
                            <th>Exemple</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                        <tr>
                            <td><code>jakarta.faces.html</code></td>
                            <td><code>h:</code></td>
                            <td>Composants d'interfaces utilisateur</td>
                            <td><code>&lt;h:body&gt;</code>, <code>&lt;h:form&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>jakarta.faces.core</code></td>
                            <td><code>f:</code></td>
                            <td>Fonctionnalités spécifiques à Jakarta Faces</td>
                            <td><code>&lt;f:validateLongRange&gt;</code>, <code>&lt;f:ajax&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>jakarta.faces.facelets</code></td>
                            <td><code>ui:</code></td>
                            <td>Fonctionnalités de <em>templating</em></td>
                            <td><code>ui:component</code>, <code>ui:composition</code></td>
                        </tr>
                        <tr>
                            <td><code>jakarta.tags.core</code></td>
                            <td><code>c:</code></td>
                            <td>Balises pour les itérations, tests, etc.</td>
                            <td><code>&lt;c:forEach&gt;</code>, <code>&lt;c:if&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>jakarta.tags.functions</code></td>
                            <td><code>fn:</code></td>
                            <td>Fonctions utiles (math, chaînes, etc.)</td>
                            <td><code>fn:substring</code>, <code>fn:toUpperCase</code></td>
                        </tr>
                        <tr>
                            <td><code>jakarta.faces.composite</code></td>
                            <td><code>cc:</code></td>
                            <td>Pour définir de nouveaux composants</td>
                            <td><code>&lt;cc:interface&gt;</code>, <code>&lt;cc:implementation&gt;</code></td>
                        </tr>
                    </tbody>
                </table>
            </section>




            <!--------------------------------------------->
            <section>
                <h1>Ressources externes</h1>
                <ul>
                    <li>Les ressources externes (CSS, images, scripts) sont gérées par le framework</li>
                    <li>Balises dédiées (e.g. <code>&lt;h:outputStylesheet&gt;</code> pour les CSS, <code>&lt;h:graphicImage&gt;</code> pour les images)</li>
                    <li>Les ressources sont placées dans le répertoire <code>/resources</code> du projet:</li>
                    <pre><code class="language-text compact" data-trim>
/resources
    /css
        default.css
    /images
        logo-couleur.png
    /js
        script.js
                    </code></pre>
                    <li>Accès aux ressources via l'expression EL: <code>#{resource['images:logo-couleur.png']}</code></li>
                    <li>Possible de déplacer la ressource dans la page HTML résultante:</li>
                    <pre><code class="language-html compact" data-trim>
&lt;h:outputStylesheet library=&quot;css&quot; name=&quot;default.css&quot; target=&quot;head&quot;/&gt;
                    </code></pre>
                    Essentiel pour les composants composites (détails plus tard)
                </ul>
            </section>

            <!--------------------------------------------->
            <section>
                <h1>Baking beans</h1>
                <ul>
                    <li>Bean CDI utilisé dans une page Facelets : doit être annoté avec <code>@Named</code></li>
                    <pre><code class="language-java" data-trim data-line-numbers>
@Named("userNumber")
public class UserNumberBean { ... }
                    </code></pre>
                    <li>Utilisation dans la facelet:</li>
                    <pre><code class="language-html" data-trim data-line-numbers="3,6,7">
&lt;h:form&gt;
    &lt;h2&gt;
        Hi, my name is Sime. I am thinking of a number from #{userNumber.minimum} to #{userNumber.maximum}. Can you guess it?
    &lt;/h2&gt;
    &lt;p&gt;
        &lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumber.userNumber}&quot;&gt;
            &lt;f:validateLongRange minimum=&quot;#{userNumber.minimum}&quot; maximum=&quot;#{userNumber.maximum}&quot;/&gt;
        &lt;/h:inputText&gt;
                    </code></pre>
                    <li>Il s'agit d'une injection: le conteneur recherche une instance, et la crée si elle n'existe pas</li>
                </ul>
            </section>
            <!--------------------------------------------->
            <section>
                <h1>Baking beans</h1>
                <ul>
                    <li>Dans une application type, on a généralement un baking bean par facelet</li>
                    <li>Les scopes CDI : <code>@RequestScoped</code>, <code>@SessionScoped</code>, <code>@ApplicationScoped</code></li>
                    <li>+ nouveau scope : <code>@ViewScoped</code></li>
                    <pre><code class="language-java" data-trim data-line-numbers>
@Named("userNumber")
@ViewScoped
public class UserNumberBean { ... }
                    </code></pre>
                    <li>Permet de réutiliser la même instance tant que l'utilisateur interagit avec la même page</li>
                </ul>
                <img src="figures/chap5/jsf-mvc.png" class="w-30 m-auto mt-4">
            </section>


            <!--------------------------------------------->
            <section>
                <h1>Validation et conversion</h1>
                <ul>
                    <li>Les données saisies dans un formulaires sont des chaînes de caractères</li>
                    <li>Il faut les convertir en Java, dans le bon type</li>
                    <li>Exemple: conversion en entier pour affecter à <code>userNumber</code></li>
                    <pre><code class="language-html compact" data-trim>
&lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
                    </code></pre>
                    <li>Ici la conversion est implicite mais le developpeur peut définir une conversion explicite</li>
                    <pre><code class="language-html compact" data-trim>
&lt;h:inputText id=&quot;userNo&quot; title=&quot;Enter a number from 0 to 10:&quot; value=&quot;#{userNumberBean.userNumber}&quot;&gt;
    &lt;f:convertNumber integerOnly=&quot;true&quot; /&gt;
&lt;/h:inputText&gt;
                    </code></pre>
                </ul>
            </section>

        </div>
    </div>

    <script src="reveal/dist/reveal.js"></script>
    <script src="reveal/plugin/notes/notes.js"></script>
    <script src="reveal/plugin/highlight/highlight.js"></script>
	<script src="reveal/plugin/math/math.js"></script>
    <script src="reveal/plugin/zoom/zoom.js"></script>
    <script src="reveal/plugin/reveald3.js"></script>
    <script>
        Reveal.initialize({
            width: 800,
            height: 600,
            margin: 0.05,
            center: false,
            hash: true,
            controls: false,
            slideNumber: 'c/t',
            showSlideNumber: 'all',
            mouseWheel: true,
            transition: 'none', // Transition style : none/fade/slide/convex/concave/zoom
            progress: true,
            autoPlayMedia: true,
            plugins: [ RevealNotes, RevealHighlight, Reveald3, RevealZoom, RevealMath.KaTeX ]
        });
    </script>
</body>
</html>